//	Tanteres USI Life Support patch by bokrif	(https://forum.kerbalspaceprogram.com/index.php?/profile/125061-bokrif/)
//	partially based on the patch made by GJdude	(https://forum.kerbalspaceprogram.com/index.php?/profile/196709-gjdude/)
//	2020-01-12

//	The general idea was that if Beale made Tantares parts for us to make VA/LK/Salyut/Progress/Soyuz/Mir/Polyus-like vessels than those who 
//	use the great USI-Life Support should be able to achieve Salyut/Progress/Soyuz/Mir/Polyus-like capabilities regarding life support.
//	It was kind of easy to achieve this for crew vehicles because I was able to look it up the approximaty supply capacities. For the rest it was
//	more difficult.
//	I made a research and checked every data I could find about the Salyut-7 program and its flights and other. So the Salyut-7 become the reference.
//	Making the Mir a reference proved to be more difficult for me due to all these different parts, so with this patch a Mir-replica would have
//	much larger capacities of supplies, recyclers and habitation. It got overpowerd. Sorry.
//	Also this reference means that RoverDude's original suggestions for USI-LS values are not used (ref: USI-LS wiki).

//	Salyut-7 had expeditions that spent ~half a year up in there. They were regularly visited by Progress resupply vessels. I made the assumption
//	that these carried significant amount of food, some water and other kind of supplies the crew needed. Based on the timeline I put together
//	usually these regular Progesses went up bi-monthly. So I assumed they could carry 2 months of supplies for the standard crew of 2. These
//	become the reference numbers. You can build a Salyut out of 2 crewed part in Tantares, so a smaller and larger hab part should be able to
//	provide 6 kerbal-months of habitation for a crew of 2. I added supply capacities to almos all parts.
//	Also because most of the parts have two variants, one with a small window, one without one, I decided I give those two variants different
//	capabilities. The windowless one become supply storage and recycle parts, the other the habitats. Larger parts can combine these two.
//	A Progress-replica would be able to provide 2 kerbal-months of supplies for a crew of 2 without recyclers.
//	Also if you intend to use the recycler patched parts than you would not have their habitat capacities, so such a Salyut would be able to
//	sustain its crew of 2 with fewer supplies but for a shorter time. Now you have the incentive to send up a new module with recycle parts for
//	improvement.
//	Also, I decided to not include any supplies for the VA-like return vehicle (part: Alnair LK1 'Måneskraper' Capsule) because that one was 
//	intended for only reentry. If you are using that in other than a TKS-replica, you need to creative with supplies and habitation.
//	The Polyus-like Rotanev parts got enhanced capacities so I could provide some bonuses for these advanced large parts. The windowless Rotanev
//	become an agroponics unit for your advanced stations or maybe interplanetary vessels...
//	Airlock parts are omitted for balance reasons.

//	Recycler names: "SRV-K"/"SRV-K2"/"Elektron"/"Elektron-M2" Life Support Recycler. SRV-K was a water recovery system onboard Salyuts. 
//	SRV-K2 was the same but on Mir. Elektron was a water-to-oxygen converter, still used on ISS. Elektron-M2 is an imaginary improved Elektron for
//	advanced station modules (Polyus-like).
//	Vozdukh is not mentioned here but it is a CO2 removing system.
//	The Rotanev agropony uses a system named "Vitatsikl-DP". Vitatsikl-T is a planned bio-regenerative life support system (BLSS) research for ISS.
//	The DP variant is an imaginary advanced-long term version (DP) of it.

//	LK  ========================================================================================

//	Libra 'Måneboks' Lander Can
//	libra_crew_s0p5_1
//	module: supplies for 2,5 kerbal days
//	the original LK was planned to be operational for 48 hours
@PART[libra_crew_s0p5_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    RESOURCE
    {
        name = Supplies
        amount = 27
        maxAmount = 27
    }
}

//	Soyuz capsule-like  ========================================================================================

//	Tantares 12-A "Vingleboks" Crew Capsule	|	Tantares 2CR 'Dobbelboks' Crew Module 	|	Tantares 3CR 'Trippelboks' Crew Module
//	tantares_crew_s1_1						|	Tantares_Crew_2							|	Tantares_Crew_1
//	module: supplies for 2,5 kerbal days for the total crew
@PART[tantares_crew_s1_1|Tantares_Crew_2|Tantares_Crew_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    RESOURCE
    {
        name = Supplies
        amount = 81
        maxAmount = 81
    }
}

//	Soyuz-like orbital modules

//	Tantares 93-A "Eldstesfære" Orbital Module 	|	Tantares 93-B "Eldresfære" Orbital Module 	|	Tantares 93-C "Nysfære" Orbital Module   |
//	tantares_orbital_module_s1_1				|	tantares_orbital_module_s1_2				|	tantares_orbital_module_s1_3             |   tantares_orbital_module_s1_4
//	module: supplies for resupply missions; some habitation capacity of 1 kerbal-month (slightly increased mission capabilities)
@PART[tantares_orbital_module_s1_1|tantares_orbital_module_s1_2|tantares_orbital_module_s1_3|tantares_orbital_module_s1_4]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 1
 		BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }
    RESOURCE
    {
        name = Supplies
        amount = 325
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	DEPRECATED folder, from
//	Tantares OM1 Orbital Module 	|	Tantares OM1B Orbital Module
//	Tantares_Habitation_1			|	Tantares_Orbital_1
//	module: supplies for resupply missions; some habitation capacity of 1 kerbal-month (slightly increased mission capabilities)
@PART[Tantares_Habitation_1|Tantares_Orbital_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 1
 		BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }
    RESOURCE
    {
        name = Supplies
        amount = 325
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Shenzhou-like orbital modules

//	DEPRECATED folder, from
//	Tantares SZ1 Habitation Section |	Tantares SZ1B Habitation Section
//	Tantares_Habitation_2			|	Tantares_Orbital_2
//	module: supplies for resupply missions; some habitation capacity of 2 kerbal-month (increased mission capabilities)
@PART[Tantares_Habitation_2|Tantares_Orbital_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 2
 		BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    RESOURCE
    {
        name = Supplies
        amount = 650
        maxAmount = 650
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Progress-like  ========================================================================================

//	Hamal FS1 Forward Section
//	Hamal_Habitation_1
//	module: supplies storage for resupply missions
@PART[Hamal_Habitation_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    RESOURCE
    {
        name = Supplies
        amount = 1300
        maxAmount = 1300
    }
 
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 200
    }
}

//	Hamal PC1 Propellant Control Block 	| 	Hamal PC2 Propellant Control Block
//	Hamal_Control_1						|	Hamal_Control_2
//	module: MonoPropellant
@PART[Hamal_Control_1|Hamal_Control_2]:AFTER[USILifeSupport]
{
	RESOURCE
    {
        name = MonoPropellant
        amount = 240
        maxAmount = 240
    }
}

//	Polyus-like  ========================================================================================

//	Rotanev 25-A1
//	rotanev_crew_s2_1_1
//	module: habitat, XL, for 24 kerbal-months; supplies
//	Rotanev 25-A1 is an advanced habitation for a larger crew (4) for up to 6 kerbal-months with internal supply storage
@PART[rotanev_crew_s2_1_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    INTERNAL
	{
		name = crewCabinInternals
	}
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 24
 
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
 
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 2600
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 325
    }
}

//	Rotanev 25-A2
//	rotanev_crew_s2_1_2
//	module: agroponics, large, Nom-O-Matic 25000-I equivalent
//	Rotanev 25-A2 is technically not a habitation but it contains a large agroponics module, a 
//	bio-regenerative life support system (BLSS) making is suitable to increase mission duration
//	Alternatively it can be equipped with an improved 90% effective recycler for a crew of 4 instead of the BLSS.
@PART[rotanev_crew_s2_1_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    @TechRequired = survivability
    INTERNAL
	{
		name = crewCabinInternals
	}
    MODULE
	{
		name = USI_SwapController
        ResourceCosts = SpecializedParts,25,MaterialKits,100,ElectricCharge,2000
	}
	MODULE
	{
		name = USI_SwappableBay
        bayName =  Life Support
        moduleIndex = 0     
// instead of 1
	//	bayName = "Vitatsikl-DP" bio-regenerative life support system (BLSS)
	//	moduleIndex = 0
	//	currentLoadout = 0
	//	hasPermanentLoadout = true
	}
//	MODULE
//	{
//		name = USI_SwappableBay
//		bayName = "Elektron-M2" Life Support Recycler
//		moduleIndex = 1
//		currentLoadout = 1
//		hasPermanentLoadout = true
//	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
	}
//	MODULE // this may give error
//	{
//		name = USI_Converter
//		UseSpecialistBonus = false
//	}
	MODULE
	{
		name = USI_ConverterSwapOption
		ConverterName = "Vitatsikl-DP" BLSS
		StartActionName = Start "Vitatsikl-DP" BLSS
		StopActionName = Stop "Vitatsikl-DP" BLSS
		UseSpecialistBonus = true
		ExperienceEffect = BotanySkill
		EfficiencyTag = Greenhouse

		INPUT_RESOURCE
		{
			ResourceName = Mulch
			Ratio =  0.00120000
		}
		INPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio =  0.00012000
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Supplies
			Ratio = 0.00132000
			DumpExcess = False
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 2.64
		}
	}
    RESOURCE
    {
        name = Fertilizer
        amount = 0
        maxAmount = 325
    }
	MODULE
    {
        name = USILS_LifeSupportRecyclerSwapOption
        CrewCapacity = 4
        RecyclePercent = .90
        ConverterName = "Elektron-M2" Recycler
        tag = Life Support
        StartActionName = Start "Elektron-M2" Recycler
        StopActionName = Stop "Elektron-M2" Recycler
        UseSpecialistBonus = false
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 10
        }
    }
	RESOURCE
	{
		name = Supplies
		amount = 0
		maxAmount = 1300
	}
	RESOURCE
	{
		name = Mulch
		amount = 0
		maxAmount = 325
	}
}

//	Mir-like (DOS-7)  ========================================================================================

//	Eridani 27KB Crew Module
//	Eridani_Crew_2
//	module: habitat, large, for 8 kerbal-months; supplies
@PART[Eridani_Crew_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	INTERNAL
	{
		name = crewCabinInternals
	}
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 8
 
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
 
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Eridani 27KA Crew Module
//	Eridani_Crew_1
//	module: habitat, medium, for 4 kerbal-months; supplies
@PART[Eridani_Crew_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	INTERNAL
	{
		name = crewCabinInternals
	}
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 4
 
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
 
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Mir-like (Kvant-1) ========================================================================================

//	Acamar SM1 Research Module
//	Acamar_Lab_1
//	module: habitat, small, 4 kerbal-months; "Elektron" Life Support Recycler (80%) for a crew of 2; electricity
@PART[Acamar_Lab_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	INTERNAL
	{
		name = crewCabinInternals
	}    
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
		currentLoadout = 0
		hasPermanentLoadout = true
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = "Elektron" Life Support Recycler
		moduleIndex = 1
		currentLoadout = 1
		hasPermanentLoadout = true
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 4
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }
    MODULE
    {
        name = USILS_LifeSupportRecyclerSwapOption
        CrewCapacity = 2
        RecyclePercent = .75
        ConverterName = "Elektron" Recycler
        tag = Life Support
        StartActionName = Start "Elektron" Recycler
        StopActionName = Stop "Elektron" Recycler
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 3
        }
    }
    // extra EC for convenient command of station during dark side transit
    @RESOURCE[ElectricCharge]
    {
      @amount += 8000
      @maxAmount += 8000
    }
}

//	Acamar SM2 Research Module
//	Acamar_Lab_2
//	module: habitat, small, 4 kerbal-months; "Elektron" Life Support Recycler (80%) for a crew of 2 (more efficient EC consumption); electricity
@PART[Acamar_Lab_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	INTERNAL
	{
		name = crewCabinInternals
	}
    MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
		currentLoadout = 0
		hasPermanentLoadout = true
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = "Elektron" Recycler
		moduleIndex = 1
		currentLoadout = 1
		hasPermanentLoadout = true
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 4
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }
    MODULE
    {
        name = USILS_LifeSupportRecyclerSwapOption
        CrewCapacity = 2
        RecyclePercent = .75
        ConverterName = "Elektron" Recycler
        tag = Life Support
        StartActionName = Start "Elektron" Recycler
        StopActionName = Stop "Elektron" Recycler
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 2.5
        }
    }
    // extra EC for convenient command of station during dark side transit
    @RESOURCE[ElectricCharge]
    {
      @amount += 4000
      @maxAmount += 4000
    }
}

//	Mir-like (Kristall, Kvant-2, Spektr, Priroda)  ============================================================

//	Aquila 12-A1 "Banehytte" Crew Compartment A
//	aquila_crew_s1_1_1
//	module: small habitat (private place) for a crew of one; no supply storage, this is small
@PART[aquila_crew_s1_1_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitat Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 2
        BaseHabMultiplier = 0
        ConverterName = Habitat Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

}

//	Aquila 12-A2 "Banehytte" Crew Compartment B
//	aquila_crew_s1_1_2
//	module: recycler equipment (50%) for crew of one; no supply storage, this is small
@PART[aquila_crew_s1_1_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = "SRV-K2" Recycler
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}

    MODULE
    {
        name = USILS_LifeSupportRecyclerSwapOption
        CrewCapacity = 1
        RecyclePercent = .50
        ConverterName = "SRV-K2" Recycler
        tag = Life Support
        StartActionName = Start "SRV-K2" Recycler
        StopActionName = Stop "SRV-K2" Recycler
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 1
        }
    }
}

//	Aquila 18-A1 "Banehus" Crew Compartment A
//	aquila_crew_s1p5_1_1
//	module: small habitat (private workplace) for a crew of one; supply storage
@PART[aquila_crew_s1p5_1_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 3
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Aquila 18-A2 "Banehus" Crew Compartment B
//	aquila_crew_s1p5_1_2
//	module: recycler equipment (50%) for crew of one; with supply storage
@PART[aquila_crew_s1p5_1_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = "SRV-K2" Recycler
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}

    MODULE
    {
        name = USILS_LifeSupportRecyclerSwapOption
        CrewCapacity = 1
        RecyclePercent = .50
        ConverterName = "SRV-K2" Recycler
        tag = Life Support
        StartActionName = Start "SRV-K2" Recycler
        StopActionName = Stop "SRV-K2" Recycler
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 1
        }
    }
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Aquila 18-B1 "Banepalass" Crew Compartment A
//	aquila_crew_s1p5_2_1
//	module: habitat (not-so-private) for a crew of one; supply storage
@PART[aquila_crew_s1p5_2_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 4
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Aquila 18-B2 "Banepalass" Crew Compartment B
//	aquila_crew_s1p5_2_2
//	module: recycler equipment (50%) for crew of 2; with supply storage
@PART[aquila_crew_s1p5_2_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = "SRV-K2" Recycler
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}

    MODULE
    {
        name = USILS_LifeSupportRecyclerSwapOption
        CrewCapacity = 2
        RecyclePercent = .50
        ConverterName = "SRV-K2" Recycler
        tag = Life Support
        StartActionName = Start "SRV-K2" Recycler
        StopActionName = Stop "SRV-K2" Recycler
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 2
        }
    }
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 650
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Aquila 18-C1 "Banekirke" Crew Compartment A
//	aquila_crew_s1p5_3_1
//	module: conic supply storage
@PART[aquila_crew_s1p5_3_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Aquila 18-C2 "Banekirke" Crew Compartment B
//	aquila_crew_s1p5_3_2
//	module: recycler equipment (50%) for crew of 1; with supply storage
@PART[aquila_crew_s1p5_3_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = "SRV-K2" Recycler
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}

    MODULE
    {
        name = USILS_LifeSupportRecyclerSwapOption
        CrewCapacity = 1
        RecyclePercent = .50
        ConverterName = "SRV-K2" Recycler
        tag = Life Support
        StartActionName = Start "SRV-K2" Recycler
        StopActionName = Stop "SRV-K2" Recycler
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 2
        }
    }
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Aquila Size 2 to Size 0.5 Crew Compartment
//	aquila_crew_s2_s0p5_1
//	module: adapter sized supply storage, pressurized
@PART[aquila_crew_s2_s0p5_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 625
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Aquila Size 2 to Size 1.5 Crew Compartment
//	aquila_crew_s2_s1p5_1
//	module: adapter sized supply storage, pressurized
@PART[aquila_crew_s2_s1p5_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 1300
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Salyut-like ========================================================================================

//	Tucana 25-A1 "Genserboks" Tail Section
//	tucana_crew_s2_1
//	module: habitat, large, larger half of Salyut (Salyut = 12 kerbal-months); supplies
//	Tucana 25-A1/2 life support is designed for maximum 8 kerbal-months of stay if resupplied regularly
@PART[tucana_crew_s2_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        //	with max crew capacity of 2 they can stay in the module for 4 kerbal-months
        BaseKerbalMonths = 8
 
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    // supplies for 1 kerbal-months / 1 crew member --> 0.5 months / 2 crew member
    // other 1 kerbal-months worth of supplies should go on the Tucana 18 parts
    // so in overall a Salyut remake could sustain a crew of 2 for 1 month but they can stay on the vessel for 6 months with resupply
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Tucana 25-A2 "Rødsokk" Tail Section
//	tucana_crew_s2_2
//	module: habitat, large, larger half of Salyut (Salyut = 12 kerbal-months); supplies
//	Tucana 25-A1/2 life support is designed for maximum 8 kerbal-months of stay if resupplied regularly
@PART[tucana_crew_s2_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        //	with max crew capacity of 2 they can stay in the module for 4 kerbal-months
        BaseKerbalMonths = 8
 
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    // supplies for 1 kerbal-months / 1 crew member --> 0.5 months / 2 crew member
    // other 1 kerbal-months worth of supplies should go on the Tucana 18 parts
    // so in overall a Salyut remake could sustain a crew of 2 for 1 month but they can stay on the vessel for 6 months with resupply
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Tucana 18-A1 "Optikerhytte" Command Module
//	tucana_crew_s1p5_1
//	module: supplies storage; habitat, smaller half of Salyut (Salyut = 12 kerbal-months)
//	Tucana 18-A1 provides habitation capacities equal to the Eridani 27KA (roughly the same volume) = 4 kerbal-months
@PART[tucana_crew_s1p5_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 4
 
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    // supplies for 1 kerbal-months / 1 crew member --> 0.5 months / 2 crew member
    // other 1 kerbal-months worth of supplies should go on the Tucana 25 parts
    // so in overall a Salyut remake could sustain a crew of 2 for 1 month but they can stay on the vessel for 6-9 months with monthly resupply
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
}

//	Tucana 18-A2 "Vanntårn" Command Module
//	tucana_crew_s1p5_2
//	module: supplies storage; recycler module for 2 crew members by 50%; electricity
//	Tucana 18-A2 provides not habitation but a recycler with additional integral battery
@PART[tucana_crew_s1p5_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = "SRV-K" Recycler
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}

    // extra EC to help mitigate the need for too many extra batteries
    @RESOURCE[ElectricCharge]
    {
      @amount += 300
      @maxAmount += 300
    }
    MODULE
    {
        name = USILS_LifeSupportRecyclerSwapOption
        CrewCapacity = 2
        RecyclePercent = .50
        ConverterName = "SRV-K" Recycler
        tag = Life Support
        StartActionName = Start "SRV-K" Recycler
        StopActionName = Stop "SRV-K" Recycler
 
 		// EC/s demand is 50% worse than MPL recycler electricity usage
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 1
        }
    }
    // supplies for 1 kerbal-months / 1 crew member --> 0.5 months / 2 crew member
    // other 1 kerbal-months worth of supplies should go on the Tucana 25 parts
    // so with recycler and total supply amount a Salyut remake could sustain a crew of 2 for 2 month but they can stay on the vessel for 6 months with resupply
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 650
    }
}

//	Vega 25-A1 "Halehvelv" Tail Compartment
//	vega_crew_s2_1_1
//	module: habitat, large, larger half of Salyut (Salyut = 12 kerbal-months); supplies
@PART[vega_crew_s2_1_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 8
 
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
 
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
    RESOURCE
    {
        name = Mulch
        amount = 0
        maxAmount = 100
    }
}

//	Vega 18-A1 "Nervesystemet" Command Module
//	vega_crew_s1p5_1_1
//	module: supplies storage; habitat, smaller half of Salyut (Salyut = 12 kerbal-months)
@PART[vega_crew_s1p5_1_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    MODULE
	{
		name = USI_SwapController
	}
	MODULE
	{
		name = USI_SwappableBay
		bayName = Habitation Apparatus
		moduleIndex = 0
	}
	MODULE
	{
		name = USI_Converter
		UseSpecialistBonus = false
	}
    MODULE
    {
        name = USILS_HabitationSwapOption
        CrewCapacity = #$../CrewCapacity$
        BaseKerbalMonths = 4
 
        BaseHabMultiplier = 0
        ConverterName = Habitation Apparatus
        StartActionName = Start Hab-Apparatus
        StopActionName = Stop Hab-Apparatus
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.05
            @Ratio *= #$../CrewCapacity$
        }
    }

    // supplies for 1 kerbal-months / 1 crew member --> 0.5 months / 2 crew member
    // other 1 kerbal-months worth of supplies should go on the Vega 25 parts
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 325
    }
}

//	bonus: LK-700-like parts ========================================================================================

//	Aquarius 18-A "Måneøyne" Landing Capsule
//	aquarius_crew_s1p5_1
//	module: supplies storage; no habitation
@PART[aquarius_crew_s1p5_1]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    RESOURCE
    {
        name = Supplies
        amount = 110
        maxAmount = 110
    }
}

//	Aquarius Size 1.5 Service Module A 	|	Aquarius Size 1.5 Service Module B
//	aquarius_service_module_s1p5_1 		|	aquarius_service_module_s1p5_2
//	module: supplies storage
@PART[aquarius_service_module_s1p5_1|aquarius_service_module_s1p5_2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
    RESOURCE
    {
        name = Supplies
        amount = 0
        maxAmount = 215
    }
}



//	========================================================================================